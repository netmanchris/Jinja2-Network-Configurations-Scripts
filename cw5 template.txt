

 sysname HP_5500EI

 undo voice vlan mac-address 0001-e300-0000
 undo voice vlan mac-address 0003-6b00-0000
 undo voice vlan mac-address 0004-0d00-0000
 undo voice vlan mac-address 0060-b900-0000
 undo voice vlan mac-address 00d0-1e00-0000
 undo voice vlan mac-address 00e0-7500-0000
 undo voice vlan mac-address 00e0-bb00-0000
 voice vlan mac-address 0000-0000-0000 mask ff00-0000-0000
 undo voice vlan security enable

#DHCP Relay config
{% for id, ip in network_global['dhcp relay']|dictsort -%}
dhcp relay server-group {{ id }} ip {{ ip }}    
{% endfor %}
 dhcp relay server-group 0 ip 10.10.10.212

 
 irf mac-address persistent always

 domain default enable {{ network_global['domain']['name'] }}

 telnet server enable 

 lldp compliance cdp

 port-security enable 

 dot1x authentication-method pap

 mac-authentication domain {{ network_global['domain']['name'] }}


igmp-snooping

#vlan config
{% for vlan in network_global['vlans'] -%}
vlan {{ vlan['id'] }}
    name {{ vlan['name'] }}
    description {{ vlan['description'] }}
{% endfor %}

#radius config
radius scheme {{ network_global['radius']['name'] }}
 server-type extended
 primary authentication {{ network_global['radius']['auth server'] }}
 primary accounting {{ network_global['radius']['acct server'] }}
 key authentication cipher {{ network_global['radius']['secret'] }}
 key accounting cipher {{ network_global['radius']['secret'] }}
 user-name-format without-domain
 nas-ip {{ device['mgmt ip'] }}
radius scheme {{ network_global['domain']['name']
#domain config
domain {{ network_global['domain']['name'] 
 authentication default radius-scheme {{ network_global['radius']['name'] }}
 authorization default radius-scheme {{ network_global['radius']['name'] }}
 accounting default radius-scheme {{ network_global['radius']['name'] }}
 authentication login radius-scheme {{ network_global['radius']['name'] }}
 authorization login radius-scheme {{ network_global['radius']['name'] }}
 accounting login radius-scheme {{ network_global['radius']['name'] }}
 authentication lan-access radius-scheme {{ network_global['radius']['name'] }}
 authorization lan-access radius-scheme {{ network_global['radius']['name'] }}
 authentication portal radius-scheme {{ network_global['radius']['name'] }}
 authorization portal radius-scheme {{ network_global['radius']['name'] }}
 accounting portal radius-scheme {{ network_global['radius']['name'] }}
 access-limit disable 
 state active 
 idle-cut disable 
 self-service-url disable 
 accounting optional 

#DHCP Server config
{% for name, network, mask, gateway, dns, domain in network_global['dhcp server']|dictsort -%}
dhcp server ip-pool {{ name }}
    network {{  network  }} mask {{ mask }}
    gateway-list {{ gateway }}
    dns-list {{ dns }}
    domain-name {{ domain }}
{% endfor %}         

#Local Userconfig
{% for username, password, AuthAttrib in network_global['local users']|dictsort -%}
local-user {{ username }}
    password cipher {{ password }}
    authorization-attribute level {{ AuthAttrib }}
{% endfor %}   

 stp enable
#Mgmt Address config
interface LoopBack0
 ip address {{ device['mgmt ip'] }} {{ device['mgmt mask'] }} 


#VLAN Interface config
{% for id, ip, mask, description in device['vlans']|dictsort -%}
interface Vlan-interface {{ id }}
    ip address {{ ip }} {{ mask }}
    description {{ description }}
{% endfor %} 



#Syslog config
 info-center source SHELL channel 2 log level notifications
 info-center source ACL channel 2
 info-center source ACL channel 5
{% for loghost in network_global['syslog']|dictsort -%}
 info-center loghost {{ loghost }} channel 5

#SNMP Config
 snmp-agent
 snmp-agent community read {{ network_global['snmp']['read'] 
 snmp-agent community read {{ network_global['snmp']['write']
 snmp-agent sys-info contact {{ network_global['snmp']['syscontact']
 snmp-agent sys-info location {{ network_global['snmp']['syslocation']
 snmp-agent sys-info version all
{% for target in network_global['snmp']['trap']|dictsort -%}
                                 
 snmp-agent target-host trap address udp-domain {{ target }} params securityname public v2c
 
 command-alias enable
 command-alias mapping display show
 command-alias mapping save wr
 command-alias mapping undo no
 command-alias mapping reboot reload
 command-alias mapping header banner
 command-alias mapping reset clear
 command-alias mapping acl access-list
 command-alias mapping port switchport
 command-alias mapping stp spanning-tree
 command-alias mapping snmp-agent snmp-server
 command-alias mapping user-interface line
 command-alias mapping return end
 command-alias mapping quit exit
 command-alias mapping sysname hostname
 command-alias mapping delete erase
 command-alias mapping info-center logging

 dhcp enable 

#NTP server config
{% for server in network_global['ntpServer']%}
 ntp-service unicast-server {{ server }}

 ssh server enable
 sftp server enable


 ftp server enable


user-interface aux 0
 authentication-mode scheme
user-interface vty 0 4
 authentication-mode scheme
user-interface vty 5 15
